@tailwind base;
@tailwind components;
@tailwind utilities;

/* Magazine-style design system */
@layer base {
  html {
    @apply antialiased;
  }

  body {
    @apply text-magazine-black font-sans;
    background: linear-gradient(135deg, #FFF9F0 0%, #F5F7F2 50%, #FDFCF8 100%);
    background-attachment: fixed;
    font-size: 18px;
    line-height: 1.7;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-display font-bold tracking-tight;
  }

  h1 {
    @apply text-5xl md:text-7xl leading-none mb-8;
  }

  h2 {
    @apply text-4xl md:text-5xl leading-tight mb-6;
  }

  h3 {
    @apply text-3xl md:text-4xl mb-4;
  }

  img {
    @apply max-w-full h-auto;
  }

  a {
    @apply transition-colors duration-200;
  }
}

@layer components {
  /* Grid lines - decorative elements */
  .grid-line-vertical {
    @apply absolute top-0 bottom-0 w-px bg-magazine-black/10;
  }

  /* Navigation pseudo-element effects */
  .nav-link::after {
    content: '';
    @apply absolute bottom-0 left-0 right-0 h-0.5 bg-magazine-accent scale-x-0 transition-transform duration-300;
  }

  .nav-link:hover::after {
    @apply scale-x-100;
  }

  /* Project card pseudo-elements - can't be inline */
  .project-card::before {
    content: '';
    @apply absolute inset-0 opacity-0 transition-opacity duration-500 pointer-events-none;
    background: linear-gradient(135deg, rgba(107, 123, 75, 0.03) 0%, transparent 100%);
    z-index: 1;
  }

  .project-card:hover::before {
    @apply opacity-100;
  }

  .project-card:hover {
    box-shadow:
      0 20px 25px -5px rgba(0, 0, 0, 0.1),
      0 10px 10px -5px rgba(0, 0, 0, 0.04),
      0 0 0 1px rgba(107, 123, 75, 0.1);
  }

  .project-card-corner:hover {
    filter: blur(12px);
  }

  /* Mobile navbar styles - responsive overrides */
  .navbar-collapse.show {
    @apply block bg-magazine-white/95 backdrop-blur-md p-6 rounded-lg mt-4 shadow-lg;
  }

  @media (max-width: 1023px) {
    .navbar-collapse.show ul {
      @apply flex-col gap-4;
    }

    .navbar-collapse.show li {
      @apply w-full text-center;
    }
  }

  /* Content styling - prose overrides */
  .content {
    @apply prose prose-lg prose-headings:font-display max-w-none;
  }

  .content h1 {
    @apply border-l-4 border-magazine-accent pl-6 mb-8;
  }

  .content h2 {
    @apply border-l-4 border-magazine-secondary pl-6 mb-6;
  }

  .content a {
    @apply text-magazine-accent no-underline border-b-2 border-magazine-accent/30;
    @apply hover:border-magazine-accent hover:bg-magazine-accent/5;
  }

  .content code {
    @apply bg-magazine-black/5 px-2 py-1 rounded text-sm;
  }

  .content pre {
    @apply bg-magazine-black text-magazine-white p-6 rounded-lg overflow-x-auto;
    @apply border-l-4 border-magazine-accent;
  }

  .content pre code {
    @apply bg-transparent p-0;
  }

  .content blockquote {
    @apply border-l-4 border-magazine-accent pl-6 italic text-magazine-black/70;
  }

  /* Tags */
  .tag {
    @apply inline-block px-4 py-2 text-sm font-medium rounded-full;
    @apply bg-magazine-black text-magazine-white;
    @apply hover:bg-magazine-accent transition-colors;
  }

  /* Cards */
  .card {
    @apply border-2 border-magazine-black/10 rounded-lg overflow-hidden;
    @apply transition-all duration-300 hover:shadow-2xl hover:border-magazine-accent;
    background: rgba(253, 252, 248, 0.8);
    backdrop-filter: blur(10px);
  }

  /* Alert boxes */
  .alert-warning {
    @apply bg-magazine-tertiary/20 border-l-4 border-magazine-secondary p-6 rounded-r;
  }

  /* List items */
  .list-item {
    @apply py-6 border-b border-magazine-black/10;
    @apply hover:bg-magazine-black/5 transition-colors px-4 -mx-4;
  }

  .list-item h6 {
    @apply text-2xl font-bold mb-2;
  }

  .list-item a {
    @apply text-magazine-black hover:text-magazine-accent;
  }

  /* Masonry Grid for Photography */
  .masonry-grid {
    width: 100%;
  }

  .masonry-item {
    width: 20%;
    padding: 6px;
    box-sizing: border-box;
  }

  /* Let images determine their own height based on aspect ratio */
  .masonry-item:not(.masonry-description) img {
    width: 100%;
    height: auto;
    display: block;
  }

  .masonry-width-1 {
    width: 20%;
  }

  .masonry-width-2 {
    width: 40%;
  }

  .masonry-width-3 {
    width: 60%;
  }

  /* Responsive breakpoints */
  @media (max-width: 1024px) {
    .masonry-item {
      width: 25%;
    }

    .masonry-width-1 {
      width: 25%;
    }

    .masonry-width-2 {
      width: 50%;
    }

    .masonry-width-3 {
      width: 75%;
    }
  }

  @media (max-width: 768px) {
    .masonry-item {
      width: 33.333%;
    }

    .masonry-width-1 {
      width: 33.333%;
    }

    .masonry-width-2 {
      width: 66.666%;
    }

    .masonry-width-3 {
      width: 100%;
    }
  }

  @media (max-width: 640px) {
    .masonry-item {
      width: 50%;
    }

    .masonry-width-1 {
      width: 50%;
    }

    .masonry-width-2,
    .masonry-width-3 {
      width: 100%;
    }
  }

  /* Description cell styling */
  .masonry-description {
    min-height: 250px;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Floating animations for decorative shapes */
  .floating-shape-1 {
    animation: float-1 25s ease-in-out infinite;
  }

  .floating-shape-2 {
    animation: float-2 30s ease-in-out infinite;
  }

  .floating-shape-3 {
    animation: float-3 22s ease-in-out infinite;
  }

  @keyframes float-1 {
    0%, 100% {
      transform: translate(0, 0) scale(1) rotate(0deg);
      opacity: 0.12;
    }
    25% {
      transform: translate(80px, -60px) scale(1.4) rotate(90deg);
      opacity: 0.18;
    }
    50% {
      transform: translate(-60px, 80px) scale(0.7) rotate(180deg);
      opacity: 0.08;
    }
    75% {
      transform: translate(60px, 60px) scale(1.2) rotate(270deg);
      opacity: 0.15;
    }
  }

  @keyframes float-2 {
    0%, 100% {
      transform: translate(0, 0) scale(1) rotate(0deg);
      opacity: 0.12;
    }
    33% {
      transform: translate(-70px, 70px) scale(1.5) rotate(120deg);
      opacity: 0.2;
    }
    66% {
      transform: translate(70px, -50px) scale(0.8) rotate(240deg);
      opacity: 0.1;
    }
  }

  @keyframes float-3 {
    0%, 100% {
      transform: translate(0, 0) scale(1) rotate(0deg);
      opacity: 0.12;
    }
    30% {
      transform: translate(60px, 80px) scale(1.3) rotate(180deg);
      opacity: 0.16;
    }
    60% {
      transform: translate(-80px, -60px) scale(0.75) rotate(360deg);
      opacity: 0.08;
    }
  }

  /* Avatar ring hue rotation animation */
  .avatar-ring {
    animation: hue-shift 10s ease-in-out infinite;
  }

  .avatar-ring img {
    animation: hue-shift-counter 10s ease-in-out infinite;
  }

  @keyframes hue-shift {
    0%, 100% {
      filter: hue-rotate(0deg);
    }
    50% {
      filter: hue-rotate(30deg);
    }
  }

  @keyframes hue-shift-counter {
    0%, 100% {
      filter: hue-rotate(0deg);
    }
    50% {
      filter: hue-rotate(-30deg);
    }
  }
}

/* Figure styling */
figure {
  @apply my-12;
}

figure img {
  @apply w-full rounded-lg shadow-lg;
}

figure figcaption {
  @apply mt-4 text-center text-sm text-magazine-black/60 italic;
}

/* Paginator */
.pages {
  @apply flex justify-center items-center gap-4 py-8;
}

.pages a {
  @apply px-4 py-2 bg-magazine-black text-magazine-white rounded;
  @apply hover:bg-magazine-accent transition-colors;
}
