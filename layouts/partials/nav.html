<nav class="transition-all duration-300 bg-magazine-white/80 backdrop-blur-md border-b border-magazine-black/5 sticky top-0 z-50 shadow-sm">
  <div class="container mx-auto px-8 py-6 max-w-7xl">
    <!-- Mobile header with hamburger and title -->
    <div class="flex items-center justify-between lg:hidden">
      <a class="nav-link relative font-medium py-2 px-3 hover:text-magazine-accent transition-colors duration-200 text-xl font-black text-magazine-accent hover:text-magazine-accent-dark" href="/">
        {{ .Site.Title }}
      </a>
      <button
        id="navToggle"
        class="p-3 text-magazine-black hover:text-magazine-accent transition-colors"
        type="button"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <i class="fa-solid fa-bars text-xl"></i>
      </button>
    </div>

    <div class="navbar-collapse hidden lg:flex items-center justify-between w-full" id="navbarSupportedContent">
      {{ if .Site.Menus.main }}
      <ul class="flex items-center gap-2">
        <li class="hidden lg:flex items-center gap-3">
          {{ with .Site.Params.profilePic }}
          <a href="/" class="flex-shrink-0">
            <img src="{{ . }}" alt="{{ $.Site.Title }}" class="w-10 h-10 rounded-full object-cover" />
          </a>
          {{ end }}
          <a class="nav-link relative font-medium py-2 px-3 hover:text-magazine-accent transition-colors duration-200 text-xl font-black text-magazine-accent hover:text-magazine-accent-dark" href="/">
            {{ .Site.Title }}
          </a>
        </li>
        <li class="hidden lg:block">
          <span class="text-magazine-black/20 mx-2">Â·</span>
        </li>
        {{ $currentPage := . }} {{ range sort .Site.Menus.main }} {{ $is :=
        $currentPage.IsMenuCurrent "main" . }} {{ $has :=
        $currentPage.HasMenuCurrent "main" . }}
        <li>
          <a class="nav-link relative font-medium py-2 px-3 hover:text-magazine-accent transition-colors duration-200 text-base{{ if or $is $has }} text-magazine-accent{{ end }}" href="{{ .URL }}">
            {{ .Name }}
          </a>
        </li>
        {{ end }}
      </ul>
      {{ end }}
      {{ if .Site.Menus.icon }}
      <ul class="flex items-center gap-3">
        {{ range sort .Site.Menus.icon }}
        <li>
          <a
            title="{{ .Name }}"
            class="inline-flex items-center justify-center w-10 h-10 rounded-full hover:bg-magazine-accent/10 transition-all duration-200 text-magazine-accent hover:text-magazine-accent-dark text-lg"
            href="{{ .URL }}"
            target="_blank"
            rel="noopener"
          >
            {{ if eq .Name "rss" }}
            <i class="fa-solid fa-rss"></i>
            {{ else }}
            <i class="fa-brands fa-{{ .Name }}"></i>
            {{ end }}
          </a>
        </li>
        {{ end }}
      </ul>
      {{ end }}
    </div>
  </div>
</nav>

<script>
  // Mobile menu toggle
  (function() {
    const navToggle = document.getElementById('navToggle');
    const navbarContent = document.getElementById('navbarSupportedContent');

    if (navToggle && navbarContent) {
      navToggle.addEventListener('click', function() {
        const isExpanded = this.getAttribute('aria-expanded') === 'true';

        // Toggle visibility
        navbarContent.classList.toggle('hidden');

        // Update aria-expanded
        this.setAttribute('aria-expanded', !isExpanded);
      });
    }
  })();
</script>
