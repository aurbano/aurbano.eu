{{ partial "header" . }}

<div class="accent-line"></div>

<main class="flex-1 py-16">
  <div class="container mx-auto px-8 max-w-4xl">
    <article>
      <header class="mb-16">
        <!-- Breadcrumb -->
        <div class="text-sm mb-6">
          <a href="/" class="text-magazine-accent hover:underline">Home</a>
          <span class="mx-2">→</span>
          <a href="/post" class="text-magazine-accent hover:underline">Posts</a>
        </div>

        <!-- Title -->
        <h1 class="text-5xl md:text-7xl font-black mb-6 leading-none tracking-tight">
          {{ .Title }}
        </h1>

        <!-- Meta -->
        <div class="flex flex-wrap items-center justify-between gap-4 pb-6 border-b-2 border-magazine-black/10">
          <div class="flex items-center gap-4">
            <time class="inline-block px-4 py-2 bg-magazine-accent text-magazine-white font-bold rounded-full text-sm">
              {{ .Date.Format "January 2, 2006" }}
            </time>
            <span class="text-magazine-black/60">{{ .ReadingTime }} min read</span>
          </div>
          <a
            href="{{ .Site.Params.repo }}/blob/master/content/{{ .File.Path }}"
            class="text-magazine-black/60 hover:text-magazine-accent transition-colors"
            title="Edit on GitHub"
          >
            <i class="fa-solid fa-pencil"></i> Edit
          </a>
        </div>

        {{ partial "tags" . }}
      </header>

      {{ if (.Param "outdated") }}
      <div class="alert-warning mb-12">
        <b class="font-bold text-lg">⚠️ Here be dragons!</b> <br />
        I wrote this ages ago and is very likely outdated. Time flies!
      </div>
      {{end}}

      <!-- Content -->
      <div class="content prose prose-lg max-w-none">
        {{ .Content }}
      </div>

      <!-- Related posts -->
      {{ $related := first 5 (where (where (where .Site.Pages.ByDate.Reverse
      ".Type" "==" "post") ".Params.tags" "intersect" .Params.tags)
      "Permalink" "!=" .Permalink) }}
      {{ if $related }}
      <div class="section-divider"></div>
      <div class="mt-16">
        <h3 class="text-3xl font-bold mb-8">Related Posts</h3>
        <div class="space-y-0">
          {{ range $related }}
            {{ partial "list-item" . }}
          {{ end }}
        </div>
      </div>
      {{ end }}
    </article>
  </div>
</main>

{{ partial "footer" . }}
