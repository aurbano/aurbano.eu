<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<title>Did you mean? In php</title>
<meta name=description content="A blog by Alejandro U. Alvarez on programming and humans">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=HandheldFriendly content="True">
<meta name=MobileOptimized content="320">
<meta property="og:site_name" content="Alejandro U. Alvarez - Blog">
<meta property="og:type" content="article">
<meta property="og:title" content="Did you mean? In php">
<meta property="og:description" content="In a new website I am developing for a client I had to add the usual &#34;Did you mean&mldr; ?&#34; in the search results for her. Si I started thinking for the easiest way to do this.
There are actually a lot of php functions out there to look for similar text. The most obvious one?
similar_text()
 similar_text — Calculate the similarity between two strings
 You must pass 2 parameters plus an optional third.">
<meta property="og:url" content="https://aurbano.eu/post/wp/2008-05-30-did-you-mean-in-php/">
<meta property="article:published_time" content="2008-05-30 00:00:00 +0000 UTC">
<meta property="article:modified_time" content="2008-05-30 00:00:00 +0000 UTC">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Did you mean? In php">
<meta name=twitter:description content="In a new website I am developing for a client I had to add the usual &#34;Did you mean&mldr; ?&#34; in the search results for her. Si I started thinking for the easiest way to do this.
There are actually a lot of php functions out there to look for similar text. The most obvious one?
similar_text()
 similar_text — Calculate the similarity between two strings
 You must pass 2 parameters plus an optional third.">
<meta name=twitter:url content="https://aurbano.eu/post/wp/2008-05-30-did-you-mean-in-php/">
<meta name=twitter:label1 content="Written by">
<meta name=twitter:data1 content="Alejandro U. Alvarez">
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway">
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dark.min.css>
<link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous>
<link rel=stylesheet href=https://aurbano.eu/main.min.3fa8bb11f6b6b3ef841b29e5d96be493461f30ad6e5b94d7eea9ad7e75c67ea9.css>
<script src=https://code.jquery.com/jquery-3.4.1.slim.min.js integrity=sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n crossorigin=anonymous></script>
</head>
<body>
<nav class="navbar navbar-expand-lg">
<div class=container>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav nav-menu mr-auto">
<li class=nav-item>
<a class=nav-link href=/ style=font-weight:700>
Alejandro U. Alvarez
</a>
</li>
<li class=nav-item>
<a class=nav-link href=/about/> About </a>
</li>
<li class=nav-item>
<a class=nav-link href=/post/> Posts </a>
</li>
<li class=nav-item>
<a class=nav-link href=/projects/> Projects </a>
</li>
</ul>
<ul class="navbar-nav social-icons">
<li class=nav-item>
<a title="github profile" class="nav-link text-github" href=https://github.com/aurbano/>
<i class="fa fa-github"></i>
</a>
</li>
<li class=nav-item>
<a title="linkedin profile" class="nav-link text-linkedin" href=https://www.linkedin.com/in/aurbano/>
<i class="fa fa-linkedin"></i>
</a>
</li>
<li class=nav-item>
<a title="twitter profile" class="nav-link text-twitter" href=https://twitter.com/alalex>
<i class="fa fa-twitter"></i>
</a>
</li>
<li class=nav-item>
<a title="stack-overflow profile" class="nav-link text-stack-overflow" href=https://stackoverflow.com/users/1262824/aurbano>
<i class="fa fa-stack-overflow"></i>
</a>
</li>
<li class=nav-item>
<a title="hacker-news profile" class="nav-link text-hacker-news" href="https://news.ycombinator.com/user?id=aurbano">
<i class="fa fa-hacker-news"></i>
</a>
</li>
<li class=nav-item>
<a title="rss profile" class="nav-link text-rss" href=/index.xml>
<i class="fa fa-rss"></i>
</a>
</li>
</ul>
</div>
</div>
</nav>
<main>
<div class=container>
<div class="row justify-content-md-center">
<div class="col col-lg-8">
<header>
<h1>Did you mean? In php</h1>
<div class=row>
<div class=col>
<small class="date text-muted">
Published on May 30, 2008
</small>
<a href=https://aurbano.eu/tags/PHP class=item-tag>
PHP
</a>
<a href=https://aurbano.eu/tags/Soundex class=item-tag>
Soundex
</a>
</div>
<div class="col-2 text-right">
<a href=https://github.com/aurbano/aurbano.eu/blob/master/content/post/wp/2008-05-30-did-you-mean-in-php.md class=edit title="Open this post on Github">
<i class="fa fa-pencil"></i>
</a>
</div>
</div>
</header>
<div class="alert alert-warning mt-4" role=alert>
<b>Here be dragons!</b> <br>
I wrote this ages ago and is very likely outdated
<del>(and absolute crap)</del>. Time flies!
</div>
<div align=start class=content><p>In a new website I am developing for a client I had to add the usual "Did you mean&mldr; ?" in the search results for her. Si I started thinking for the easiest way to do this.</p>
<p>There are actually a lot of php functions out there to look for similar text. The most obvious one?<br>
<a href=http://www.php.net/manual/en/function.similar-text.php>similar_text()</a></p>
<blockquote>
<p>similar_text — Calculate the similarity between two strings</p>
</blockquote>
<p>You must pass 2 parameters plus an optional third. The two first are the strings to compare, and the optional one is the percentage of "closeness" you want them to have. It is quite useful, although it is too expensive in terms of time to use with huge database searches, so I wouldn't recommend it.</p>
<p>There are two other methods that might be good for some cases, and another function that is just the best. I'll show you first the best way to achieve this:<br>
The <a href=http://www.php.net/manual/en/function.levenshtein.php>Levenshtein</a> algorithm, which basically finds the number of characters you must add, edit, or remove from a string to make it match another one. At first it doesn't sound too useful, but take a look at this example:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>// input misspelled word
</span><span style=color:#75715e></span>$input <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;carrrot&#39;</span>;

<span style=color:#75715e>// array of words to check against
</span><span style=color:#75715e></span>$words  <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;apple&#39;</span>,<span style=color:#e6db74>&#39;pineapple&#39;</span>,<span style=color:#e6db74>&#39;banana&#39;</span>,<span style=color:#e6db74>&#39;orange&#39;</span>,
                <span style=color:#e6db74>&#39;radish&#39;</span>,<span style=color:#e6db74>&#39;carrot&#39;</span>,<span style=color:#e6db74>&#39;pea&#39;</span>,<span style=color:#e6db74>&#39;bean&#39;</span>,<span style=color:#e6db74>&#39;potato&#39;</span>);

<span style=color:#75715e>// no shortest distance found, yet
</span><span style=color:#75715e></span>$shortest <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;

<span style=color:#75715e>// loop through words to find the closest
</span><span style=color:#75715e></span><span style=color:#66d9ef>foreach</span> ($words <span style=color:#66d9ef>as</span> $word) {

    <span style=color:#75715e>// calculate the distance between the input word,
</span><span style=color:#75715e></span>    <span style=color:#75715e>// and the current word
</span><span style=color:#75715e></span>    $lev <span style=color:#f92672>=</span> <span style=color:#a6e22e>levenshtein</span>($input, $word);

    <span style=color:#75715e>// check for an exact match
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> ($lev <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {

        <span style=color:#75715e>// closest word is this one (exact match)
</span><span style=color:#75715e></span>        $closest <span style=color:#f92672>=</span> $word;
        $shortest <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;

        <span style=color:#75715e>// break out of the loop; we&#39;ve found an exact match
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span>;
    }

    <span style=color:#75715e>// if this distance is less than the next found shortest
</span><span style=color:#75715e></span>    <span style=color:#75715e>// distance, OR if a next shortest word has not yet been found
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> ($lev <span style=color:#f92672>&lt;=</span> $shortest <span style=color:#f92672>||</span> $shortest <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) {
        <span style=color:#75715e>// set the closest match, and shortest distance
</span><span style=color:#75715e></span>        $closest  <span style=color:#f92672>=</span> $word;
        $shortest <span style=color:#f92672>=</span> $lev;
    }
}
 
<span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;Input word: </span><span style=color:#e6db74>$input\n</span><span style=color:#e6db74>&#34;</span>;
<span style=color:#66d9ef>if</span> ($shortest <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;Exact match found: </span><span style=color:#e6db74>$closest\n</span><span style=color:#e6db74>&#34;</span>;
} <span style=color:#66d9ef>else</span> {
    <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;Did you mean: </span><span style=color:#e6db74>$closest</span><span style=color:#e6db74>?</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
}
</code></pre></div><p>This is an example where even a misspelled word can be found. It uses the Levenshtein to look for the word which is the most similar one, and then it is returned.<br>
This is the output of the code before:</p>
<pre><code>Input word: carrrot
Did you mean: carrot?
</code></pre>
<p>The use of this function is quite simple, although there are many optional parameters for more precise use. See the <a href=http://www.php.net/manual/en/function.levenshtein.php>php.net reference for this function</a>. The biggest problem is that you would have to run the algorithm against all words to get the actual one. I would only recommend it on a subset of words already narrowed down with a more generic approach.</p>
<p>Other algorithms that could be used for this are <a href=http://www.php.net/manual/en/function.soundex.php>soudex</a> and <a href=http://www.php.net/manual/en/function.metaphone.php>metaphone</a>. <a href=http://www.php.net/manual/en/function.soundex.php>Soundex</a> will create a key that is the same for all words that are pronounced in a similar way.<br>
For example, the following code:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>soundex</span>(<span style=color:#e6db74>&#39;beard&#39;</span>);
<span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>soundex</span>(<span style=color:#e6db74>&#39;bird&#39;</span>);
<span style=color:#66d9ef>echo</span> <span style=color:#a6e22e>soundex</span>(<span style=color:#e6db74>&#39;bear&#39;</span>);

<span style=color:#75715e>/*
</span><span style=color:#75715e> * Output:
</span><span style=color:#75715e> * B630
</span><span style=color:#75715e> * B630
</span><span style=color:#75715e> * B600
</span><span style=color:#75715e> */</span>
</code></pre></div><p>Where <code>beard</code> and <code>bird</code> are the same. <del cite=http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex>This could make suggestions fast if you have already created a column in the mysql tables with the soundex key of the tags for example, so that you could search not only for the string, but also for its soundex key&mldr;</del></p>
<p><strong>UPDATE:</strong></p>
<p>You can use <a href=http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex>MySQL's built in function SOUNDEX()</a> to search both for the string as-is, or for the soundex too, to provide also misspelled words.</p>
<p>And finally, the <a href=http://www.php.net/manual/en/function.metaphone.php>metaphone</a> function, it's a variation of the <code>soundex</code> key that produces also a key that is the same for all words pronounced the same, but more accurately than <code>soundex</code>, since <code>metaphone</code> actually knows the rules of English pronounciation.<br>
The use would be exactly the same as <code>soundex</code>, and if you are going to use something of the sort I would recommend it for its improved accuracy.<br>
But bear in mind that both soundex and metaphone won't probably work fine in most other languages, or at least for languages with phonemes that don't exist in English.</p>
</div>
<div class="card related shadow">
<div class=card-body>
<h5 class=card-title>More like this:</h5>
<div class=item>
<h6>
<a href=/post/wp/2009-01-20-display-time-since-last-visit-in-php/>Display time since last visit in PHP</a>
<small class="date text-muted">January 20, 2009</small>
</h6>
</div>
<div class=item>
<h6>
<a href=/post/wp/2008-09-11-assign-image-to-wordpress-post/>Easily assign an image to a post in WordPress</a>
<small class="date text-muted">September 11, 2008</small>
</h6>
</div>
<div class=item>
<h6>
<a href=/post/wp/2008-05-28-get-full-domain-from-users-url-in-php/>Get full domain from user's URL in php</a>
<small class="date text-muted">May 28, 2008</small>
</h6>
</div>
</div>
</div>
</div>
</div>
</div>
</main>
<footer>
<p class="copyright text-muted">
<a href=/>Alejandro U. Alvarez</a>
© All rights reserved.
&bull;
<a href=/index.xml>
RSS
</a>
&bull;
<a href=/categories>
Categories
</a>
&bull;
<a href=/tags>
Tags
</a>
</p>
</footer>
<div class="border animated-hue"></div>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/typescript.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=https://aurbano.eu/vendor/bootstrap/dist/js/bootstrap.bundle.min.js></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
<script>$(document).on('click',function(){$('.collapse').collapse('hide')})</script>
</body>
</html>